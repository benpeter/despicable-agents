---
task: Add GitHub issue integration to /despicable-prompter and /nefario skills
date: 2026-02-11
status: completed
agents: [devx-minion, iac-minion, security-minion, ux-strategy-minion, software-docs-minion, lucy, margo, test-minion, code-review-minion]
phases-completed: [1, 2, 3, 3.5, 4, 5]
phases-skipped: [6, 7, 8]
approval-gates: 0
files-changed: [skills/despicable-prompter/SKILL.md, skills/nefario/SKILL.md]
branch: nefario/github-issue-integration-skills
---

## Executive Summary

Added GitHub issue integration to both `/despicable-prompter` and `/nefario` skills. Both now accept `#<n>` as the first argument to fetch task context from GitHub issues via the `gh` CLI. The prompter writes generated briefs back to the issue (updating title and body). Nefario uses the issue body as the task description and adds `Resolves #N` to PR bodies for auto-close.

## Original Prompt

Add GitHub issue integration to /despicable-prompter and /nefario skills

**Outcome**: Both skills can accept `#<n>` as the first argument to pull task context from a GitHub issue, reducing copy-paste friction and keeping issue trackers as the source of truth for task descriptions. The prompter additionally writes its output back to the issue, closing the loop.

**Success criteria**:
- `/despicable-prompter #42` fetches issue #42, generates a brief from its body, updates the issue body with the brief (without `/nefario` prefix), and updates the issue title to the brief's first line
- `/nefario #42` fetches issue #42 and uses its body as the task prompt
- `/despicable-prompter #42 also consider caching` appends the trailing text to the issue body before processing
- `/nefario #42 skip phase 8` appends the trailing text to the issue description as the prompt
- Non-existent issue numbers produce a clear error message (not a stack trace or silent failure)
- `gh` CLI unavailability produces a clear error message

**Scope**:
- In: `skills/despicable-prompter/SKILL.md`, `skills/nefario/SKILL.md`
- Out: Changes to AGENT.md files, install.sh, docs, the-plan.md

## Agent Contributions

### Planning Phase

| Agent | Recommendation | Tasks |
|-------|---------------|-------|
| devx-minion | Four-mode Input Resolution section; three-component error messages; write-back non-fatal with chat fallback | 2 |
| iac-minion | `gh issue view --json` with temp files; `--body-file` for writes; two-layer availability check | 2 |
| security-minion | Three attack surfaces identified (injection, leakage, shell); strict regex, content boundaries, secret scanning | 2 |
| ux-strategy-minion | Write-back as default; auto-generated markers; trailing text semantics per user criteria | 2 |
| software-docs-minion | Updated argument-hint with pipe separator; dedicated Argument Parsing section; one new example | 2 |

### Review Phase (3.5)

| Agent | Verdict | Notes |
|-------|---------|-------|
| security-minion | ADVISE | Defense-in-depth improvements (non-blocking) |
| test-minion | APPROVE | Manual verification appropriate for SKILL.md files |
| ux-strategy-minion | ADVISE | Write-back surprise, trailing text consistency |
| software-docs-minion | ADVISE | Error discoverability, content boundary docs |
| lucy | ADVISE | Scope awareness on issue context metadata |
| margo | ADVISE | Prompt length, secret scanning maintenance surface |

### Code Review Phase (5)

| Agent | Verdict | Notes |
|-------|---------|-------|
| code-review-minion | APPROVE | Shell commands follow POSIX best practices |
| lucy | APPROVE | All success criteria met, scope compliant |
| margo | APPROVE | Proportional to task, no over-engineering |

## Decisions

### Trailing Text Semantics

**Decision**: Prompter appends trailing text to issue body before processing (enriches brief, included in write-back). Nefario appends trailing text to prompt only (not written back to issue).

**Rationale**: Follows user's explicit success criteria. Nefario's trailing text may contain process directives (e.g., "skip phase 8") that should not pollute the issue.

### Write-Back Behavior

**Decision**: Prompter write-back is default (no confirmation prompt). Original issue body is overwritten.

**Rationale**: GitHub preserves edit history. HTML provenance comment (`<!-- generated by /despicable-prompter -->`) provides attribution. Minimizes friction in the workflow.

### Security Depth

**Decision**: Include input validation, content boundaries, and secret scanning. Exclude markdown comment stripping and Unicode normalization.

**Rationale**: Content boundary markers and injection defense instructions are the primary defense layer for LLM-consumed content. Additional text normalization is disproportionate complexity for behavioral prompts.

## Execution

Two tasks executed in parallel (single batch, no gates):

1. **Update despicable-prompter SKILL.md** (devx-minion, sonnet): Added Argument Parsing section with issue fetch, write-back, secret scanning, content boundaries. Added Example 4. Updated refinement offer and empty-input examples. +119 lines.

2. **Update nefario SKILL.md** (devx-minion, sonnet): Added Argument Parsing section with issue fetch, content boundaries, issue context metadata. Added PR body `Resolves #N` integration. +94 lines.

## Verification

Code review passed (3 APPROVE). Skipped: tests (no executable code), docs (skills are self-documenting, external docs out of scope).

## Risks

| Risk | Severity | Mitigation | Status |
|------|----------|------------|--------|
| Prompt injection via issue body | HIGH | Content boundary tags + injection defense rules | Accepted (inherent LLM limitation) |
| Secret leakage via write-back | HIGH | Regex scanning gate before `gh issue edit` | Mitigated |
| Shell quoting with issue content | MEDIUM | `--body-file` for writes, `--json` for reads | Mitigated |
| `#` prefix collision | LOW | Strict digits-only regex | Mitigated |
| Original issue body overwritten | LOW | GitHub edit history + provenance marker | Accepted |

## Working Files

Companion directory: `docs/history/nefario-reports/2026-02-11-102532-github-issue-integration-skills/`

Files: prompt.md, phase1-metaplan.md, phase2-devx-minion.md, phase2-iac-minion.md, phase2-security-minion.md, phase2-software-docs-minion.md, phase2-ux-strategy-minion.md, phase3-synthesis.md, phase3.5-lucy.md, phase3.5-margo.md, phase3.5-security-minion.md, phase3.5-software-docs-minion.md, phase3.5-test-minion.md, phase3.5-ux-strategy-minion.md, phase5-code-review-minion.md, phase5-lucy.md, phase5-margo.md
