## Domain Plan Contribution: ux-strategy-minion

### Recommendations

#### 1. Write-back should be the default, not opt-in

**JTBD analysis**: When a user types `/despicable-prompter #42`, they are hiring the tool to transform a rough idea (living in an issue) into a structured brief AND to close the loop so the issue becomes the canonical record. If write-back were opt-in, users would need to remember an extra flag every time -- adding cognitive load to a tool whose entire purpose is reducing friction. The "need behind the need" is: keep the issue tracker as the source of truth without manual copy-paste.

**Kano classification**: Write-back is a Performance feature. Its absence would not break the tool (the brief still appears in the terminal), but its presence is the core value proposition of the `#N` integration. Making it opt-in demotes it to an Excitement feature that most users would never discover.

**Risk of destructive default**: The issue body *is* being overwritten. This is the one valid argument for opt-in. However, the issue's edit history on GitHub preserves the original, and the user explicitly invoked the tool with an issue number -- that is informed consent. The user's intent signal is strong. Adding a confirmation prompt ("Write brief back to #42? [Y/n]") would add friction to every single invocation for a safety net that GitHub's edit history already provides.

**Recommendation**: Write-back is the default. No confirmation prompt. Provide `--no-writeback` as an escape hatch for the rare case where someone wants to preview without updating. This follows the principle: optimize for the common case, provide exits for the uncommon case.

#### 2. Auto-generated markers are essential for trust and scanability

The written-back brief MUST include a visible marker so that anyone reading the issue (including the original author returning later) can distinguish "human-authored rough idea" from "machine-structured brief." Without this, the provenance of the issue content becomes ambiguous -- violating the visibility heuristic (system status must always be visible).

**Recommended marker**: A single line at the top of the written-back body:

```
<!-- generated by /despicable-prompter -->
```

This is an HTML comment -- invisible when rendered on GitHub's UI, but visible in the raw markdown. It signals provenance to tools and power users without adding visual noise for casual readers.

Additionally, prepend a minimal visible indicator as the first rendered line:

```
*Brief generated by /despicable-prompter from original issue description.*
```

This one-liner in italics serves as a "system status" indicator (Nielsen heuristic #1) without dominating the content. It answers the question "where did this structured text come from?" that any collaborator would have.

**What NOT to do**: Do not include timestamps, version numbers, or agent metadata in the marker. That is noise. The Git/GitHub edit history already captures when the edit happened.

#### 3. Updating the issue title is the right default

The brief's first line is a one-line task summary (e.g., "Improve documentation quality and coverage"). This is a better issue title than whatever rough text the user originally typed. Updating the title improves the scanability of the issue list for everyone on the project -- it is a direct usability improvement to the broader team's experience, not just the invoking user's.

However, there is a social consideration (JTBD social dimension): if the user is working on a shared repo, changing the title of someone else's issue could cause confusion. Since the success criteria specify this behavior, I will not argue against it, but the marker recommendation above becomes even more important when the title changes -- it signals that this was an intentional transformation, not someone randomly editing.

#### 4. Trailing-text-append is intuitive but needs a mental model cue

The pattern `/despicable-prompter #42 also consider caching` is intuitive because it reads like natural language: "take issue 42, also consider caching." Users will likely discover this pattern through the argument-hint or help text.

**Risk**: The "append to issue body before processing" implementation detail is NOT intuitive. The user does not think "append my text to the issue body." They think "process issue 42 with this additional context." The distinction matters for `/nefario #42 skip phase 8` -- the user means "use this issue but skip phase 8 of nefario," not "append 'skip phase 8' to the issue description."

**Recommendation**: Trailing text should be treated as *supplementary context passed to the skill*, not literally appended to the issue body. For `/despicable-prompter`, the trailing text augments the input before brief generation (and the brief includes the augmented context). For `/nefario`, the trailing text augments the task prompt (and may include nefario-specific directives like "skip phase 8" that should never touch the issue).

If the success criteria require literal append to the issue body, this creates a category error: "skip phase 8" is a process directive, not task content. Users will learn to avoid the trailing-text feature for directives, which defeats the purpose.

#### 5. `/nefario` should NOT write status back to issues by default

**Cognitive load analysis**: `/nefario` orchestrations are long-running, multi-phase processes. Writing status comments back to issues adds a new responsibility (maintaining issue state) to an already complex workflow. It also creates a new failure mode (comment write fails mid-orchestration) and a new noise source (issue subscribers get notified on every status update).

**JTBD check**: The user's job when invoking `/nefario #42` is "execute this task using the issue as context." The job is NOT "keep the issue updated with orchestration status." These are different jobs. Conflating them violates the single-responsibility principle at the UX level.

**What would be valuable**: A single comment at orchestration completion with a link to the PR (if created). This closes the issue-to-PR loop without adding noise during execution. This is a natural extension that could be added later -- it is NOT needed for the initial implementation.

**Recommendation**: No status write-back for `/nefario` in this iteration. The PR itself (which already references the issue via branch name or PR body) is the status artifact. If users want issue comments, that is a separate feature with its own JTBD.

#### 6. Error messaging must be actionable, not technical

The success criteria require clear error messages for non-existent issues and `gh` unavailability. Applying Nielsen's heuristic #9 (error messages should explain problems and suggest solutions):

- Non-existent issue: `Issue #42 not found in this repository. Check the issue number or verify you're in the right repo.`
- `gh` unavailable: `GitHub CLI (gh) is not installed or not in PATH. Install it: https://cli.github.com/`
- Auth failure: `GitHub CLI is not authenticated. Run: gh auth login`

Each error names the problem, explains the likely cause, and gives a concrete next step. No stack traces, no raw stderr, no "command failed with exit code 1."

### Proposed Tasks

**Task 1: Define interaction contracts for both skills**
- What: Document the exact input parsing rules, write-back behavior, trailing-text handling, error messages, and marker format as a spec section within each SKILL.md. This is the "what" before implementation.
- Deliverables: Updated SKILL.md files with new `## GitHub Issue Integration` sections specifying all behaviors.
- Dependencies: None (this is first).

**Task 2: Implement `#N` parsing and `gh` integration for `/despicable-prompter`**
- What: Add issue fetching, brief write-back (with marker), title update, trailing-text-as-context, and error handling to the despicable-prompter SKILL.md.
- Deliverables: Updated `skills/despicable-prompter/SKILL.md`.
- Dependencies: Task 1.

**Task 3: Implement `#N` parsing and `gh` integration for `/nefario`**
- What: Add issue fetching, trailing-text-as-context (no write-back), and error handling to the nefario SKILL.md.
- Deliverables: Updated `skills/nefario/SKILL.md`.
- Dependencies: Task 1.

**Task 4: Validate trailing-text behavior for edge cases**
- What: Define and document how the skills handle: `#42` with no trailing text, `#42` with trailing text that looks like a directive, `#42` with trailing text that is additional context, and `#0` or `#-1` or `#abc` (malformed numbers). Ensure the parsing is unambiguous.
- Deliverables: Edge case documentation within the SKILL.md sections from Task 1.
- Dependencies: Task 1.

### Risks and Concerns

1. **Trailing text ambiguity between context and directives**. The pattern `/nefario #42 skip phase 8` is ambiguous: is "skip phase 8" additional task context or a nefario process directive? If the implementation appends trailing text to the issue body, process directives will pollute the issue. If it does not append, users lose the ability to augment issue content from the command line. The resolution must be clear and documented.

2. **Destructive write-back without undo in the CLI**. While GitHub preserves edit history, the user has no CLI-level undo. If the brief generation produces a poor result, the issue body is already overwritten. Mitigation: the `--no-writeback` flag provides an escape hatch, and the refinement offer in the prompter gives users a chance to iterate before they paste. But wait -- with `#N`, there is no "paste" step; write-back is automatic. This means the refinement loop changes: after write-back, the user would need to re-run `/despicable-prompter #42` to overwrite again. The refinement offer line ("Adjust anything, or paste into /nefario as-is") needs updating for the `#N` case.

3. **Rate limiting and permissions**. `gh` API calls could fail due to rate limits or insufficient permissions (e.g., read-only access to private repos). Error handling must cover these cases gracefully.

4. **Refinement loop UX change**. Currently, the prompter outputs a brief and says "Adjust anything, or paste into /nefario as-is." With write-back, the brief is already on the issue. The refinement offer must change to something like: "Adjust anything (re-run to update the issue), or invoke /nefario #42 to execute." This is a meaningful interaction flow change that affects the prompter's closing behavior.

5. **Shared repository social dynamics**. Automatically rewriting issue titles and bodies in shared repos could surprise collaborators. The marker mitigates this but does not eliminate it. For solo projects (like the user's setup), this is fine. For team repos, the behavior could be controversial.

### Additional Agents Needed

**devx-minion** should be consulted if not already involved. The `gh` CLI integration involves shell command execution patterns, error handling, and argument parsing that are squarely in the developer experience domain. The devx-minion can advise on robust `gh` output parsing, authentication detection, and graceful degradation patterns.

No other additional agents needed beyond what the meta-plan likely already includes.
