## Domain Plan Contribution: devx-minion

### Recommendations

The `/despicable-lab` SKILL.md has **three distinct overlay touchpoints** that need modification. Each requires a different treatment. The goal is a clean, simple skill file where nefario is simply skipped -- no branching logic, no special cases, no dead code paths.

**1. Version Check section (lines 37-58): Remove overlay drift detection entirely**

The entire "overlay drift detection" block (lines 37-58) exists solely for the overlay system. It calls `./validate-overlays.sh --summary` and appends drift details to the status report. Since the overlay system is being removed, this block should be deleted entirely. The version check loop (lines 29-35) needs a skip condition for nefario added at the top.

The example table (lines 47-58) showing drift output should be replaced with a simpler example that shows nefario as "hand-maintained (skipped)" instead of showing drift detection output.

**2. Step 2 Build section (lines 93-107): Remove the branching, add skip guard**

Lines 94-107 contain a two-branch conditional:
- Branch 1 (lines 94-101): "For agents WITHOUT overrides" -- this is the normal path, keep it
- Branch 2 (lines 102-107): "For agents WITH overrides" -- this is the overlay path, delete it entirely

The overlay branch writes to `AGENT.generated.md` instead of `AGENT.md` and reports "Manual merge required." Since nefario is now hand-maintained and skipped, this branch has no purpose. But rather than just removing the branch, we should also add an explicit skip guard at the top of Step 2 that says: "If the agent is nefario, skip -- nefario/AGENT.md is hand-maintained."

After removing branch 2, branch 1 no longer needs the "WITHOUT overrides" qualifier. It becomes the only path, so the conditional framing should be removed and the instructions should read as unconditional.

**3. File Locations table (line 65): Minor -- update to note hand-maintained status**

The table at line 65 says nefario's build location is `nefario/AGENT.md`. This should be annotated to indicate it is hand-maintained (not built by the lab). A simple note like `nefario/AGENT.md (hand-maintained)` suffices.

**4. Error message quality**

If someone explicitly runs `/despicable-lab nefario`, the skill should produce a clear, helpful message rather than silently skipping. Good developer experience means explaining what happened and why:

```
nefario: skipped (hand-maintained). nefario/AGENT.md is not generated by
the build pipeline. Edit it directly or via the-plan.md spec updates.
```

This follows the three-component error message pattern: what happened (skipped), why (hand-maintained), what to do instead (edit directly).

### Proposed Tasks

**Task 1: Add nefario skip condition to Version Check section**

What to do:
- In the Version Check code block (lines 29-35), add a skip condition: `If agent is nefario: report as "hand-maintained (skipped)" and continue to next agent`
- Delete lines 37-58 entirely (the "overlay drift detection" block and its example output)
- Update the example table to show nefario as skipped rather than showing drift detection output

Deliverables: Updated Version Check section in SKILL.md with no overlay references

Dependencies: None

**Task 2: Simplify Step 2 Build to single path with nefario skip guard**

What to do:
- Add a skip guard at the start of Step 2: "If the agent is nefario, skip the build step entirely. Report: 'nefario: skipped (hand-maintained).'"
- Delete lines 102-107 (the "For agents WITH overrides" branch)
- Remove the conditional framing from lines 94-101. Change "For agents WITHOUT overrides (no `AGENT.overrides.md`):" to just be the unconditional build instructions (remove the numbered prefix "3." and "4." since there is only one path)
- Remove the reference to `docs/agent-anatomy.md` in line 107 (the merge documentation link)

Deliverables: Updated Step 2 section in SKILL.md with no overlay branching

Dependencies: None (can run in parallel with Task 1)

**Task 3: Update File Locations table and agent count references**

What to do:
- Annotate the nefario row in the File Locations table (line 65) to indicate hand-maintained status
- Check the Argument Parsing section header description (line 24: "--all: Force-rebuild all 27 agents") -- this should say 26 agents or "all agents (except nefario)" to be accurate
- Update any other references to "27 agents" or "all agents" within the skill to account for the nefario exclusion

Deliverables: Consistent agent count and nefario status throughout SKILL.md

Dependencies: None (can run in parallel with Tasks 1 and 2)

**Task 4: Verify the Constraints section needs no overlay references**

What to do:
- Review the Constraints section (lines 125-134) for any implicit overlay references
- Currently clean -- no overlay mentions. Confirm and move on.

Deliverables: Confirmation that Constraints section needs no changes

Dependencies: None

### Risks and Concerns

**Risk 1: Stale documentation cross-references**

The SKILL.md at line 107 references `docs/agent-anatomy.md` for merge rules. After the overlay removal, that document will also be modified or deleted by another task in this plan. The SKILL.md change should not reference documentation that is being removed. Ensure the SKILL.md edits and the docs cleanup are coordinated -- specifically, do not leave a dangling link to `docs/agent-anatomy.md` overlay sections that no longer exist.

**Risk 2: `/despicable-lab --all` behavior change**

Currently `--all` rebuilds "all 27 agents." After this change, it rebuilds 26 and skips nefario. This is a behavior change that could surprise users who expect `--all` to mean all. The skip message ("nefario: skipped (hand-maintained)") makes this visible, but the `--all` description in the Argument Parsing section should explicitly mention the exception.

**Risk 3: Future agents needing hand-maintenance**

The current implementation hard-codes "nefario" as the skip target. If another agent ever needs hand-maintenance, this pattern would need to be extended. Consider whether the skip condition should check for a marker (e.g., `x-hand-maintained: true` in frontmatter) rather than a hard-coded name. However, per YAGNI, hard-coding "nefario" is the right call for now -- just be aware this is a deliberate simplicity tradeoff.

**Risk 4: `validate-overlays.sh` reference removal**

The SKILL.md references `./validate-overlays.sh --summary` (line 40). If the script is being deleted as part of the broader overlay removal, the SKILL.md must not reference it. These changes are likely handled by another task in the plan but must be coordinated.

### Additional Agents Needed

None. The SKILL.md changes are straightforward text edits within a single file. The devx perspective covers the user-facing experience (error messages, help text, argument parsing), which is the primary concern for this skill file. The actual file deletions (validate-overlays.sh, overlay docs, test fixtures) are outside the SKILL.md scope and will be handled by other tasks in the plan.
