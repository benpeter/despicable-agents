# Phase 3.5 Review: test-minion

## Verdict: ADVISE

### Warnings

1. **Conditional rule for "Session Resources: Always" contradicts the `<details>` collapse pattern when all subsections are empty.** The plan states the section is "always structurally present" and "never omitted entirely." But the Formatting Rules say "If the entire section would contain only `/nefario` in Skills Invoked and no other data, the section still appears (collapsed) for structural consistency." This is coherent but produces a collapsed section containing only a single trivial line (`/nefario -- orchestration workflow`) in the vast majority of reports (since no external skills have ever been discovered and most sessions use only `/nefario`). This is not a testability concern per se, but it means verification step 11 ("spot-check 1-2 existing reports to confirm they remain structurally valid") only validates that old reports lack the new section -- it does not validate that the new section renders correctly in a real report. Consider adding a verification step that previews the rendered output for a minimal case (only `/nefario`, no external skills, advisory mode) and a maximal case (multiple skills, external skills discovered, tool counts present).

2. **Advisory mode Tool Usage omission rule has an implicit AND that could confuse the implementing agent.** The Conditional Section Rules table says Tool Usage subsection is included when `mode != advisory AND tool counts extractable`, and omitted when `mode = advisory OR counts not available`. The Task 1 prompt reproduces this faithfully. However, the Formatting Rules section says "If tool counts are not available... replace the Tool Usage subsection with: 'Tool counts not available for this session.'" This creates an ambiguity: in advisory mode, should the subsection be fully omitted (per the conditional rule) or replaced with the "not available" fallback message (per the formatting rule)? The conditional rule should take precedence (full omission in advisory mode, fallback message only for non-advisory sessions where counts failed). The Task 1 prompt should make this precedence explicit to avoid the implementing agent choosing the wrong interpretation.

3. **`skills-used` frontmatter field omission rule is not trivially verifiable at wrap-up.** The plan says INCLUDE WHEN 1+ skills beyond `/nefario` were invoked. The SKILL.md collects `skills-invoked` which "always includes `/nefario`." The implementing agent must filter out `/nefario` before deciding whether to emit the frontmatter field. This logic is straightforward but should be stated explicitly in the Task 2 prompt (Wrap-up Sequence step 6 instructions) rather than left for the orchestrator to infer from the template. If the orchestrator includes `/nefario` in the `skills-used` frontmatter array, it defeats the purpose of the conditional inclusion rule.

4. **Verification step 10 ("Confirm no version bump") is necessary but not sufficient for backward compatibility.** The plan correctly identifies that External Skills has never appeared in any actual report, making the rename zero-cost. However, the `build-index.sh` script reads YAML frontmatter from reports. If it ever gains logic to parse `skills-used`, the conditional inclusion (sometimes present, sometimes absent) needs to be handled. This is not a current concern (the field does not exist yet and `build-index.sh` would need separate changes), but worth noting as a downstream consideration. No action needed now.

### No Blocking Concerns

The cross-cutting coverage section correctly identifies that no automated tests are needed for this template/documentation change. The verification steps (1-11) are comprehensive and manually executable. The conditional inclusion rules are coherent once the advisory-mode precedence in warning 2 is clarified. The plan is sound from a test/validation perspective.
